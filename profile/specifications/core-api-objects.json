{
  "components": {
    "schemas": {
      "jws-compact-detached": {
        "title": "The message-level and payload signature",
        "pattern": "^[A-Za-z0-9_-]+((?:\\.[A-Za-z0-9_-]+){2}|(?:(\\.\\.)[A-Za-z0-9_-]+){1})",
        "type": "string",
        "description": "The JWS compact representation schema defines the string pattern as a regular expression, denoting the structure a JWS compact token MUST follow to be a valid compact JWS Representation. It is used for defining the value of the message-level signature and of the payload signature",
        "format": "jws-compact-detached"
      },
      "PayloadBody": {
        "type": "object",
        "properties": {
          "payloads": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "Array of messaging payloads",
              "format": "binary"
            }
          }
        },
        "description": "Object holds multipart/mixed array of payloads"
      },
      "SignalMessage": {
        "title": "A Signal message which extends Problem object (RFC 7807) defined by the ISA² IPS REST API Core Profile",
        "required": [
          "instance",
          "status",
          "title",
          "type"
        ],
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "A short summary of the problem type, written in English and readable for engineers (usually not suited for non technical stakeholders and not localized).",
            "example": "Service Unavailable"
          },
          "type": {
            "type": "string",
            "description": "An URI reference that identifies the problem type. When dereferenced, it SHOULD provide human-readable documentation for the problem type (e.g. using HTML)",
            "format": "uri",
            "default": "about:blank"
          },
          "status": {
            "maximum": 600,
            "exclusiveMaximum": true,
            "minimum": 200,
            "type": "integer",
            "description": "The HTTP status code generated by the origin server for this occurrence of the ",
            "format": "int32",
            "example": 503
          },
          "detail": {
            "type": "string",
            "description": "A human-readable explanation specific to this occurrence of the problem",
            "format": "string"
          },
          "instance": {
            "type": "string",
            "description": "A URI reference that identifies the specific occurrence of the  It may or may not yieldfurther information if dereferenced.",
            "format": "uri-reference"
          },
          "digest": {
            "type": "string",
            "description": "The digest of the received message using the notation proposed in 'Digest Header' (https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-digest-headers)",
            "format": "uri-reference",
            "example": "sha-256=4REjxQ4yrqUVicfSKYNO/cF9zNj5ANbzgDZt3/h3Qxo="
          }
        },
        "description": "A Signal message which extends Problem object (RFC 7807) defined by the ISA² IPS REST API Core Profile",
        "$id": "https://joinup.ec.europa.eu/collection/api4dt/solution/.../messaging.schema.json",
        "$schema": "https://json-schema.org/draft/2020-12/schema"
      },
      "Problem": {
        "title": "A Problem Details object (RFC 7807) defined by the ISA² IPS REST API Core Profile",
        "required": [
          "status",
          "title",
          "type"
        ],
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "A short summary of the problem type, written in English and readable for engineers (usually not suited for non technical stakeholders and not localized).",
            "example": "Service Unavailable"
          },
          "type": {
            "type": "string",
            "description": "An URI reference that identifies the problem type. When dereferenced, it SHOULD provide human-readable documentation for the problem type (e.g. using HTML)",
            "format": "uri",
            "default": "about:blank"
          },
          "status": {
            "maximum": 600,
            "exclusiveMaximum": true,
            "minimum": 200,
            "type": "integer",
            "description": "The HTTP status code generated by the origin server for this occurrence of the problem.",
            "format": "int32",
            "example": 503
          },
          "detail": {
            "type": "string",
            "description": "A human-readable explanation specific to this occurrence of the problem",
            "format": "string"
          },
          "instance": {
            "type": "string",
            "description": "A URI reference that identifies the specific occurrence of the problem. It may or may not yieldfurther information if dereferenced.",
            "format": "uri-reference"
          }
        },
        "description": "A Problem Details object (RFC 7807) with ISA² IPS REST API extensions, used for signals (responses) to messages",
        "$id": "https://joinup.ec.europa.eu/collection/api4dt/solution/.../messaging.schema.json",
        "$schema": "https://json-schema.org/draft/2020-12/schema"
      },
      "MessageReferenceList": {
        "title": "A Message Reference object defined by the ISA² IPS REST API Messaging API Specification",
        "required": [
          "messageReferenceList"
        ],
        "type": "object",
        "properties": {
          "messageReferenceList": {
            "type": "array",
            "description": "List of message references.",
            "items": {
              "$ref": "#/components/schemas/MessageReference"
            }
          },
          "count": {
            "type": "integer",
            "description": "Count of all messages",
            "format": "int32"
          },
          "limit": {
            "type": "integer",
            "description": "limit number of references.",
            "format": "int32"
          },
          "offset": {
            "type": "integer",
            "description": "offset of references.",
            "format": "int32"
          }
        },
        "description": "A Message Reference object to be used when multiple messages could be retrieved from an API operation",
        "$id": "https://joinup.ec.europa.eu/collection/api4dt/solution/.../message-reference-schema-list.json",
        "$schema": "https://json-schema.org/draft/2020-12/schema"
      },
      "MessageReference": {
        "title": "A Message Reference object defined by the ISA² IPS REST API Messaging API Specification",
        "required": [
          "action",
          "messageId",
          "service"
        ],
        "type": "object",
        "properties": {
          "messageId": {
            "type": "string",
            "description": "The unique identifier of the message."
          },
          "service": {
            "type": "string",
            "description": "A representation of the service the message is submitted to."
          },
          "action": {
            "type": "string",
            "description": "A representation of the action related to the service the message is submitted to."
          },
          "href": {
            "type": "string",
            "description": "The direct link for getting the specific message",
            "format": "uri-reference"
          }
        },
        "description": "A Message Reference object to be used when multiple messages could be retrieved from an API operation",
        "$id": "https://joinup.ec.europa.eu/collection/api4dt/solution/.../message-reference-schema.json",
        "$schema": "https://json-schema.org/draft/2020-12/schema"
      }
    },
    "parameters": {
      "Original-Sender": {
        "name": "Original-Sender",
        "in": "header",
        "description": "The Original Sender represents the authenticated entity acting as the user that sends the message using the client. Following the API Core Profile, the original sender MUST be represented with an OpenID Connect token, in the form of Compact JWT Token.",
        "schema": {
          "$ref": "#/components/schemas/jws-compact-detached"
        },
        "example": "eyJhbGciOiJIUzINiIsnRI6IkpXVCJ9.eyJzdWIiOiIxM0NTY3ODkwIiwibmIiwiaWF0IoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMePOk6yJV_adQssw5c"
      },
      "Final-Recipient": {
        "name": "Final-Recipient",
        "in": "header",
        "description": "The Final Recipient is the entity for whom the message is sent. Can be a single identifier or a set of identifiers, as described in the Recipient Addressing Schemes section of the specification. The representation of the final recipient is out of scope of the current specification.",
        "schema": {
          "type": "string"
        },
        "example": "9999::333222111"
      },
      "Timestamp": {
        "name": "Timestamp",
        "in": "header",
        "description": "The Timestamp is the exact date and time at which the message was sent. It is provided by the client and verified by the server.",
        "schema": {
          "type": "string",
          "format": "date-time"
        },
        "example": "2021-06-17T08:30:00Z"
      },
      "Edel-Message-Sig": {
        "name": "Edel-Message-Sig",
        "in": "header",
        "description": "The Edel-Message-Sig carries the signature of the HTTP Message following the API Core Profile on Message-Level Security. Following the light context constraints, the signature is optional for the client messages, but is RECOMMENDED for server messages.",
        "schema": {
          "$ref": "#/components/schemas/jws-compact-detached"
        },
        "example": "eyJhbGciOiJIUzINiIsnRI6IkpXVCJ9.eyJzdWIiOiIxM0NTY3ODkwIiwibmIiwiaWF0IoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMePOk6yJV_adQssw5c"
      },
      "Signal-Webhook": {
        "name": "Signal-Webhook",
        "in": "header",
        "description": "The Signal-Webhook provides the callback URL that the server MUST use for sending a signal back. It is required when implementing the \"Send Message with Asynchronous Response – Push and Webhook Pull\" exchange pattern.",
        "schema": {
          "type": "string",
          "format": "uri"
        }
      },
      "Response-Webhook": {
        "name": "Response-Webhook",
        "in": "header",
        "description": "The Response-Webhook provides the callback URL that the server MUST use for sending a response. It is required when implementing the \"Send Message with Asynchronous Response – Push and Webhook Push\" exchange pattern.",
        "schema": {
          "type": "string",
          "format": "uri"
        }
      }
    },
    "headers": {
      "Edel-Payload-Sig": {
        "description": "The Edel-Payload-Sig carries the signature of a subpart of the Multipart message (see User Message section) following the API Core Profile on Payload Security.",
        "schema": {
          "$ref": "#/components/schemas/jws-compact-detached"
        }
      },
      "Original-Sender": {
        "description": "The Original Sender represents the authenticated entity acting as the user that sends the message using the client. Following the API Core Profile, the original sender MUST be represented with an OpenID Connect token, in the form of Compact JWT Token.",
        "schema": {
          "$ref": "#/components/schemas/jws-compact-detached"
        }
      },
      "Final-Recipient": {
        "description": "The Final Recipient is the entity for whom the message is sent. Can be a single identifier or a set of identifiers, as described in the Recipient Addressing Schemes section of the specification. The representation of the final recipient is out of scope of the current specification.",
        "schema": {
          "type": "string"
        }
      },
      "Timestamp": {
        "description": "The Timestamp is the exact date and time at which the message was sent. It is provided by the client and verified by the server.",
        "schema": {
          "type": "string",
          "format": "date-time"
        }
      },
      "Edel-Message-Sig": {
        "description": "The Edel-Message-Sig carries the signature of the HTTP Message following the API Core Profile on Message-Level Security. Following the light context constraints, the signature is optional for the client messages, but is RECOMMENDED for server messages.",
        "schema": {
          "$ref": "#/components/schemas/jws-compact-detached"
        }
      }
    }
  }
}
